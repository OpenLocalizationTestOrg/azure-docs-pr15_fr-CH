<properties
   pageTitle="Liste de vérification de disponibilité | Microsoft Azure"
   description="Liste de contrôle qui fournit des informations sur les problèmes de disponibilité lors de la conception."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="masimms"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="availability-checklist"></a>Liste de vérification de disponibilité

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="application-design"></a>Conception de l’application

- **Éviter tout point de défaillance unique.** Tous les composants, les services, les ressources et les instances de calcul doivent être déployés en tant que plusieurs instances pour empêcher un point de défaillance unique n’affectent la disponibilité. Cela inclut des mécanismes d’authentification. Conception de l’application à être configuré pour utiliser plusieurs instances et pour automatiquement détecter les défaillances et rediriger les requêtes vers les instances non échec où la plate-forme ne le fait pas automatiquement.
- **Décomposer la charge de travail par un autre accord de niveau de service.** Si un service est composé de charges de travail moins critiques et non critiques, les gérer différemment et spécifier les fonctionnalités du service et le nombre d’instances de répondre aux exigences de disponibilité.
- **Réduire et comprendre les dépendances de service.** Réduire le nombre de services différents utilisés lorsque cela est possible et assurez-vous que vous comprenez toutes les dépendances de service et de fonctionnalité qui existent dans le système. Cela inclut la nature de ces dépendances et de l’impact d’une panne ou réduit les performances de chacun d’eux dans l’application globale. Microsoft garantit au moins 99,9 % de disponibilité pour la plupart des services, mais cela signifie que chaque service supplémentaire, une application s’appuie sur potentiellement réduit la disponibilité globale du contrat SLA de votre système de 0,1 %.
- **Concevoir des tâches et des messages idempotent (en toute sécurité reproductible) autant que possible**, afin que les demandes en double n’entraîne pas de problèmes. Par exemple, un service peut agir comme un consommateur qui gère les messages envoyés en tant que requêtes par d’autres parties du système qui agissent comme des producteurs. Si le consommateur échoue après avoir traité le message, mais avant d’accuser réception qu’il a été traité, un producteur peut présenter une demande de répétition qui pourrait être gérée par une autre instance du consommateur. Pour cette raison, les consommateurs et les opérations qu’il effectue doivent être idempotents afin que répéter une opération exécutée précédemment ne rend pas les résultats non valides. Cela peut signifier la détection de messages en double ou s’assurer de la cohérence à l’aide d’une approche optimiste pour la gestion des conflits.
- **Utiliser un agent de message qui implémente une disponibilité élevée pour les transactions critiques.** De nombreux scénarios pour initier des tâches ou l’accès à des services à distance utilisent la messagerie pour transmettre des instructions entre l’application et le service cible. Pour optimiser les performances, l’application doit être en mesure d’envoyer le message, puis retournez pour traiter plusieurs demandes, sans avoir à attendre la réponse. Pour garantir la remise des messages, le système de messagerie doit fournir une disponibilité élevée. Files d’attente de Bus des services Azure implémentent sémantique _au moins une fois_ . Cela signifie que chaque message envoyé à une file d’attente ne seront pas perdu, bien que des copies peuvent être livrés dans certaines circonstances. En cas de traitement de message idempotent (voir l’élément précédent), répéter la livraison ne devrait pas poser de problème.
- **Concevoir des applications à la dégradation propre** lorsqu’il atteint les limites des ressources et prendre les mesures appropriées pour réduire l’impact de l’utilisateur. Dans certains cas, la charge de l’application peut dépasser la capacité d’un ou de plusieurs parties, à l’origine de réduction de la disponibilité et les échecs de connexions. Mise à l’échelle peut aider à atténuer ce problème, mais elle peut atteindre une limite imposée par d’autres facteurs, tels que la disponibilité de la ressource ou du coût. Concevoir l’application de sorte que, dans ce cas, il peut automatiquement se dégrader progressivement. Par exemple, dans un système de commerce électronique, si le sous-système de traitement des commandes est sous contrainte (ou même panne), il peut être temporairement désactivé tout en autorisant d’autres fonctionnalités (telles que la navigation du catalogue de produits) pour continuer. Il convient de reporter les demandes à un sous-système défaillant, par exemple la toujours permettant aux clients d’envoyer des commandes, mais les enregistrer pour un traitement ultérieur, lorsque le sous-système de commandes est de nouveau disponible.
- **Gérer correctement des événements de rafale rapide.** La plupart des applications doivent gérer des charges de travail variables dans le temps, tels que pics très tôt dans la matinée dans une application métier ou lorsqu’un nouveau produit est publié sur un site de commerce électronique. Mise à l’échelle peut aider à gérer la charge, mais elle peut prendre un certain temps pour les instances supplémentaires en ligne et de gérer les requêtes. Empêcher soudains ou imprévus des pics d’activité de l’application de submerger : création pour les demandes de file d’attente vers les services qu’il utilise et se dégradent normalement lorsque les files d’attente sont proche de sa pleine capacité. Vérifiez qu’il existe suffisamment de capacité et de performances disponibles dans des conditions non rafale pour décharger les files d’attente et de gérer des demandes en attente. Pour plus d’informations, consultez le [modèle de l’audit de charge basé sur la file d’attente](https://msdn.microsoft.com/library/dn589783.aspx).

## <a name="deployment-and-maintenance"></a>Déploiement et maintenance

- **Déployer plusieurs instances de rôles pour chaque service.** Microsoft apporte les garanties de disponibilité pour les services que vous créez et déployez, mais ces garanties ne sont valides que si vous déployez au moins deux instances de chaque rôle dans le service. Cela permet à un rôle pour ne pas être disponible tandis que l’autre reste active. Ceci est particulièrement important si vous avez besoin déployer les mises à jour dans un système sans interrompre les activités des clients ; instances peuvent être arrêtés et mis à jour individuellement tandis que les autres continuent à en ligne.
- **Héberger des applications dans plusieurs centres de données.** Très peu probable, mais il est possible que pour un centre de données entier pour passer en mode hors connexion par un événement tel qu’une catastrophe naturelle ou d’une défaillance d’Internet. Les applications professionnelles essentielles doivent être hébergées dans plus d’un centre de données pour offrir une disponibilité maximale. Cela peut également réduire la latence pour les utilisateurs locaux et offrent des possibilités supplémentaires de flexibilité lors de la mise à jour des applications.
- **Automatiser et tester les tâches de déploiement et de maintenance.** Les applications distribuées se composent de plusieurs parties qui doivent fonctionner ensemble. Déploiement doit par conséquent être automatisée, à l’aide de mécanismes testées et éprouvées, tels que les scripts et les applications de déploiement. Ces peuvent mettre à jour et valider la configuration et automatiser le processus de déploiement. Automatisée techniques doivent également être utilisées pour effectuer des mises à jour de tout ou partie des applications. Il est essentiel de tester tous ces processus entièrement pour s’assurer que les erreurs ne provoquent pas de ralentissement des performances. Tous les outils de déploiement doivent avoir des restrictions de sécurité appropriés pour protéger l’application déployée ; définir et appliquer les stratégies de déploiement avec soin et réduire la nécessité d’une intervention humaine.
- **Envisagez d’utiliser des fonctionnalités de reclassement et de production de la plate-forme** lorsque ceux-ci ne sont pas disponibles. Par exemple, à l’aide d’environnements intermédiaire et de production de Services de Cloud Azure permet d’applications à passer de l’un à l’autre instantanément par le biais d’un échange d’adresse IP virtuel (VIP Swap). Toutefois, si vous préférez stade sur site, ou de déployer simultanément les différentes versions de l’application et de migrer progressivement les utilisateurs, vous peut-être pas en mesure d’utiliser une opération de permutation de VIP.
- **Appliquer les modifications de configuration sans recycler** l’instance lorsque cela est possible. Dans de nombreux cas, les paramètres de configuration pour un service ou une application Azure peuvent être modifiés sans nécessiter le rôle doit être redémarré. Rôle exposent des événements qui peuvent être gérés pour détecter les modifications de configuration et de les appliquer aux composants de l’application. Toutefois, certaines modifications aux paramètres de plate-forme cœur nécessitent un rôle soit redémarré. Lors de la création de composants et services, d’optimiser la disponibilité et réduire le temps mort par leur conception d’accepter des modifications apportées aux paramètres de configuration sans devoir redémarrer l’application dans son ensemble.
- **Utiliser la mise à niveau des domaines sans aucune interruption au cours des mises à jour.** Azure compute des unités telles que le web et rôles worker sont allouées pour mettre à niveau des domaines. Mise à niveau domaines regroupement des instances de rôle afin que, lors d’une mise à jour propagée, chaque rôle dans le domaine de mise à niveau est arrêté, mis à jour et redémarré à son tour. Cela permet de minimiser l’impact sur la disponibilité des applications. Vous pouvez spécifier le nombre de domaines de mise à niveau doit être créé pour un service lorsque le service est déployé.

    > [AZURE.NOTE] Les rôles sont également réparties entre domaines d’erreur, dont chacune est raisonnablement indépendant des autres domaines de pannes en rack de serveurs, d’alimentation et de refroidissement, pour réduire le risque d’une défaillance affecte toutes les instances de rôles. Cette distribution a lieu automatiquement, et vous ne pouvez pas le contrôler.

- **Configurer des ensembles de disponibilité pour les machines virtuelles Azure.** Placer deux ou plusieurs ordinateurs virtuels dans le même jeu de disponibilité garantit que ces ordinateurs virtuels ne sera pas déployés dans le même domaine d’erreur. Pour optimiser la disponibilité, vous créez plusieurs instances de chaque machine virtuelle critique utilisés par votre système et placer ces instances dans le même jeu de disponibilité. Si vous exécutez plusieurs machines virtuelles qui ont des objectifs différents, créez une disponibilité à définir pour chaque machine virtuelle. Ajouter des instances de chaque machine virtuelle pour chaque ensemble de disponibilité. Par exemple, si vous avez créé plusieurs machines virtuelles distinctes pour agir comme un serveur web et un serveur de rapports, créer une disponibilité définie pour le serveur web et un autre pour le serveur de rapports. Ajouter des instances de la machine virtuelle du serveur web pour la disponibilité du serveur web de définir et d’ajouter des instances de la machine virtuelle de serveur rapport à l’ensemble de disponibilité report server.

## <a name="data-management"></a>Gestion des données

- **Tirer parti de la réplication de données** grâce à la redondance géographique et locale. Données de stockage Azure sont automatiquement répliquées pour vous protéger contre la perte en cas de défaillance de l’infrastructure, et certains aspects de cette réplication peuvent être configurés. Par exemple, des copies en lecture seule des données peuvent être répliquées dans plusieurs régions géographiques (appelée stockage global redondant d’accès en lecture ou RA-GRS). Notez que l’utilisation de RA-GRS entraîne des frais supplémentaires. Pour plus d’informations, consultez [Tarification de stockage Azure](https://azure.microsoft.com/pricing/details/storage/).
- **Utiliser l’accès concurrentiel optimiste et la cohérence éventuelle** lorsque cela est possible. Transactions que bloquer l’accès aux ressources par le biais de verrouillage (accès concurrentiel pessimiste) peut provoquer une baisse des performances et de réduire considérablement la disponibilité. Ces problèmes peuvent devenir particulièrement élevés dans les systèmes distribués. Dans de nombreux cas, une conception et des techniques telles que le partitionnement peuvent réduire les risques de mises à jour conflictuelles en cours. Lorsque les données sont répliquées, ou il sont lu à partir d’un magasin séparément mis à jour, les données de seulement sera finalement cohérentes. Mais les avantages généralement considérablement plus graves que l’impact sur la disponibilité de l’utilisation de transactions pour garantir la cohérence immédiate.
- **Utilisez une sauvegarde périodique et restauration de point-à-temps**et vous assurer qu’il répond à l’objectif de Point de récupération (RPO). Régulièrement et automatiquement sauvegarder des données qui ne sont pas conservées ailleurs et vérifiez que vous pouvez restaurer de manière fiable à la fois les données et l’application elle-même de défaillance. Réplication des données n’est pas une fonctionnalité de sauvegarde, car les erreurs et incohérences présentées par le biais des opérations malveillantes, erreur ou défaillance seront répliquées dans toutes les banques. Le processus de sauvegarde doit être sécurisé pour protéger les données en transit ou en stockage. Bases de données ou de parties d’un magasin de données peuvent généralement être récupérés à un point antérieur dans le temps à l’aide de journaux de transactions. Microsoft Azure offre un utilitaire de sauvegarde pour les données stockées dans la base de données de SQL Azure. Les données sont exportées dans un package de sauvegarde sur le stockage des objets blob Azure et peuvent être téléchargées à un emplacement sécurisé sur site pour le stockage.
- **Activer l’option de haute disponibilité de conserver une copie secondaire d’un cache Azure Redis.** Lors de l’utilisation du Cache Redis d’Azure, choisissez l’option standard de conserver une copie secondaire du contenu. Pour plus d’informations, voir [créer un cache dans le Cache de Redis Azure](https://msdn.microsoft.com/library/dn690516.aspx).

## <a name="errors-and-failures"></a>Erreurs et échecs

- **Présentez le concept d’un délai d’attente.** Services et des ressources peuvent devenir indisponibles, entraînant l’échec des demandes. Garantir que les délais d’expiration que vous appliquez sont appropriés pour chaque service ou la ressource, ainsi que le client qui y accède. (Dans certains cas, il peut être nécessaire de prévoir un délai plus long pour une instance particulière d’un client, selon le contexte et les autres actions que le client est en train d’effectuer.) Des délais très courts risque excessif de réessayer des opérations pour les services et les ressources qui ont des temps de latence considérable. Des délais d’attente très longue peut provoquer le blocage si un grand nombre de demandes est en attente, en attente d’un service ou d’une ressource pour répondre.
- **Réessayer les opérations ayant échoué provoquées par les défaillances temporaires.** Concevoir une stratégie de nouvelle tentative pour accéder à tous les services et les ressources lorsqu’elles ne gèrent pas, par nature, les tentatives de connexion automatique. Utiliser une stratégie qui inclut un délai croissant entre les tentatives en tant que le nombre d’échecs augmente, pour éviter une surcharge de la ressource et pour qu’il puisse normalement récupérer et traiter les demandes en file d’attente. Tentatives en continu avec des délais très courts sont susceptibles d’aggraver le problème.
- **Arrêter l’envoi des demandes pour éviter les pannes en cascade** lorsque les services à distance ne sont pas disponibles. Il peut exister des situations dans lesquelles transitoire ou autres défauts, dont la gravité d’une perte partielle de connectivité à une panne complète d’un service, prennent beaucoup plus de temps que prévu pour revenir à la normale. En outre, si un service est très occupé, défaillance dans une partie du système peut entraîner des pannes en cascade et entraînent dans de nombreuses opérations sont bloquées en maintenant sur les ressources système critiques telles que la mémoire, les threads et les connexions de base de données. Au lieu de tente continuellement de relancer une opération qui est vouée à l’échec, l’application doit accepter rapidement que l’opération a échoué et gérer correctement cet échec. Vous pouvez utiliser le modèle de disjoncteur à rejeter les demandes pour des opérations spécifiques pour des périodes définies. Pour plus d’informations, consultez [Modèle de disjoncteur](https://msdn.microsoft.com/library/dn589784.aspx).
- **Composition ou revient à plusieurs composants** pour atténuer l’impact d’un service spécifique étant hors connexion ou non disponible. Concevoir des applications pour profiter d’instances multiples sans qui affectent le fonctionnement et les connexions existantes lorsque cela est possible. Utilisation de plusieurs instances et répartir les demandes entre eux et détecter et éviter d’envoyer des requêtes à des instances ayant échoué, afin d’optimiser la disponibilité.
- **Passage à un autre service ou un workflow** lorsque cela est possible. Par exemple, en cas d’échec de l’écriture dans la base de données de SQL, stocker temporairement les données dans le stockage blob. Fournit une fonctionnalité pour relire les écritures dans le stockage blob à SQL de base de données lorsque le service est disponible. Dans certains cas, un échec de l’opération peut avoir une autre action qui permet à l’application de continuer à travailler même lorsqu’un composant ou un service tombe en panne. Si possible, de détecter les défaillances et de rediriger les demandes à d’autres services que peuvent offrir une fonctionnalité de remplacement adéquate ou pour sauvegarder ou instances de fonctionnalité réduite qui peuvent gérer les opérations pendant que le service principal est hors connexion.

## <a name="monitoring-and-disaster-recovery"></a>Surveillance et reprise après sinistre

- **Fournir de riche instrumentation pour les défaillances probables et les événements d’échec** pour signaler la situation au personnel des opérations. Pour les défaillances qui sont susceptibles de mais n’avez pas encore fournir des données suffisantes pour permettre au personnel déterminer la cause, atténuer la situation s’est produite et vous assurer que le système reste disponible. Pour les défaillances qui ont déjà eu lieu, l’application doit renvoyer un message d’erreur à l’utilisateur, mais si vous tentez de continuer à fonctionner, mais avec des fonctionnalités réduites. Dans tous les cas, le système de surveillance doit capturer des détails complets pour permettre au personnel d’effectuer une restauration rapide et si nécessaire, pour les concepteurs et les développeurs de modifier le système éviter la situation découlant à nouveau.
- **Surveiller l’état du système en mettant en œuvre des fonctions de vérification.** La santé et les performances d’une application peuvent se dégrader au fil du temps, sans être visible jusqu'à ce qu’il échoue. Implémenter des sondes ou vérifier les fonctions qui sont exécutées régulièrement à partir de l’extérieur de l’application. Ces contrôles peuvent être aussi simples que de mesurer le temps de réponse pour l’application dans son ensemble, pour des parties individuelles de l’application, pour que l’application utilise des services individuels ou des composants individuels. Fonctions de vérification peuvent exécuter des processus afin de garantir qu’ils produisent des résultats valides, mesurent la latence et vérifier la disponibilité et extraient des informations à partir du système.
- **Tester régulièrement tous les de basculement et de systèmes de secours** pour vous assurer qu’elles sont disponibles et fonctionnent comme prévu. Les modifications apportées à des systèmes et des opérations peuvent affecter les fonctions de secours et de basculement, mais l’impact peut ne pas être détectée jusqu'à ce que le système principal tombe en panne ou est surchargé. Testez-le avant qu’il est nécessaire pour compenser un problème direct lors de l’exécution.
- **Testez les systèmes de surveillance.** Basculement automatisé et systèmes de secours et visualisation manuelle de l’état du système et les performances à l’aide de tableaux de bord, tous dépendent de surveillance et l’instrumentation fonctionne correctement. Si ces éléments échouent, l’absence d’informations critiques, ou l’état des données inexactes, un opérateur ne peut-être pas réalisé que le système est défectueux ou défaillant.
- **Suivi de la progression des flux de travail longue** et reprise sur défaillance. Flux de travail longue est souvent composées de plusieurs étapes. Vérifiez que chaque étape est indépendant et peut être tentée pour réduire les risques que le processus entier devront être annulées ou que plusieurs transactions de compensation doivent être exécutées. Surveillez et gérez la progression des flux de travail longue en implémentant un modèle comme [Modèle de superviseur du Planificateur de l’Agent](https://msdn.microsoft.com/library/dn589780.aspx).
- **Plan de reprise après sinistre.** Assurer un plan entièrement testé, documenté et accepté pour la récupération à partir de n’importe quel type de défaillance qui peut restituer partie ou la totalité du système principal est indisponible. Régulièrement les procédures de test et vérifiez que tous les techniciens sont familiarisés avec le processus.
